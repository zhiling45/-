:root{
  --bg1:#0f172a; --bg2:#111827; --card:#111827cc; --text:#e5e7eb; --muted:#9ca3af;
  --accent:#22c55e; --accent-2:#16a34a; --food:#fb7185;
  --btn:#1f2937; --btn-hover:#374151; --danger:#dc2626;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; color:var(--text);
  background: radial-gradient(1200px 800px at 70% -10%, #172554 0%, var(--bg1) 40%, var(--bg2) 100%);
  font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Helvetica Neue",Arial,"Noto Sans CJK SC","Microsoft YaHei","Heiti SC",sans-serif;
  display:flex; flex-direction:column;
}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1rem clamp(.75rem,3vw,2rem)}
.title{margin:0;font-size:clamp(20px,3.5vw,28px);font-weight:700;letter-spacing:.5px}
.scoreboard{display:flex;gap:clamp(1rem,4vw,2rem);font-weight:600}

.game-area{width:100%;max-width:960px;margin:0 auto;padding:0 clamp(.75rem,3vw,2rem) 2rem;
  display:flex;flex-direction:column;align-items:center;gap:1rem;}

.controls{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:.75rem;padding:.75rem;
  background:var(--card);border:1px solid #1f2937;border-radius:12px;box-shadow:var(--shadow)}
.btn{appearance:none;border:none;outline:none;background:var(--btn);color:var(--text);padding:.65rem 1rem;border-radius:10px;
  font-weight:600;letter-spacing:.3px;cursor:pointer;transition:transform .06s ease,background .2s ease,box-shadow .2s ease;
  box-shadow:0 2px 0 rgba(255,255,255,.06), inset 0 -2px 0 rgba(0,0,0,.35)}
.btn:hover{background:var(--btn-hover);transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.primary{background:linear-gradient(180deg,#2563eb,#1d4ed8)}
.btn.primary:hover{background:linear-gradient(180deg,#3b82f6,#2563eb)}
.btn.danger{background:linear-gradient(180deg,#ef4444,var(--danger))}
.btn.danger:hover{background:linear-gradient(180deg,#f87171,#ef4444)}
.btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
.toggle{display:flex;align-items:center;gap:.4rem;color:var(--muted);user-select:none}

.canvas-wrap{position:relative;width:min(92vmin,680px);aspect-ratio:1/1;border-radius:16px;overflow:hidden;
  background: radial-gradient(120% 120% at 0% 0%, rgba(255,255,255,.06), transparent 45%),
             radial-gradient(120% 120% at 100% 100%, rgba(255,255,255,.04), transparent 45%),
             linear-gradient(180deg,#0b1220,#0a0f1a);
  border:1px solid #1f2937; box-shadow:var(--shadow)}
#game{width:100%;height:100%;display:block}

.overlay{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(1px);
  display:flex;align-items:center;justify-content:center;text-align:center;font-weight:800;letter-spacing:1px;color:#fff;
  font-size:clamp(22px,4.5vw,36px)} .overlay.hidden{display:none}
.overlay #overlayText{padding:.75rem 1rem;border-radius:12px;background:rgba(17,24,39,.65);
  border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow)}

.hint{color:var(--muted);text-align:center;margin:.25rem 0 0;font-size:.95rem}
.footer{margin-top:auto;padding:1rem;color:var(--muted);text-align:center;font-size:.9rem;opacity:.8}

/* —— 右下角悬浮圆形摇杆 —— */
.stickpad{
  position:fixed;
  right: max(12px, env(safe-area-inset-right));
  bottom: calc(max(12px, env(safe-area-inset-bottom)) + 12px);
  width: 132px; height: 132px;
  display:none; /* 大屏隐藏，小屏显示 */
  z-index: 9999;
  touch-action: none; /* 禁止浏览器手势 */
}
.stick-base{
  position:absolute; inset:0;
  border-radius:50%;
  background: radial-gradient(60% 60% at 50% 45%, rgba(255,255,255,.08), rgba(0,0,0,.25));
  border: 1px solid #1f2937;
  box-shadow: var(--shadow);
}
.stick-handle{
  --ox: 0px; --oy: 0px; /* 由 JS 实时更新 */
  position:absolute; left:50%; top:50%;
  width:56px; height:56px; border-radius:50%;
  transform: translate(calc(-50% + var(--ox)), calc(-50% + var(--oy)));
  background: radial-gradient(circle at 35% 30%, #c7d2fe 0%, #93c5fd 50%, #60a5fa 100%);
  border:1px solid rgba(255,255,255,.45);
  box-shadow: 0 6px 20px rgba(0,0,0,.35);
  pointer-events:none;
}

/* 悬浮暂停按钮 */
.fab-pause{
  position:fixed;
  right: calc(max(12px, env(safe-area-inset-right)) + 144px);
  bottom: calc(max(12px, env(safe-area-inset-bottom)) + 36px);
  width:56px; height:56px;
  border-radius:50%;
  border:1px solid #1f2937;
  background:#0f172acc; color:#e5e7eb; font-size:20px; font-weight:800;
  box-shadow: var(--shadow);
  z-index:9999;
  touch-action:manipulation;
}
.fab-pause:active{ transform:translateY(1px); }

@media (max-width: 900px){
  .stickpad{ display:block; }
  .fab-pause{ display:block; }
}
@media (max-width: 420px){
  .stickpad{ width:120px; height:120px; }
  .stick-handle{ width:52px; height:52px; }
  .fab-pause{ width:52px; height:52px; font-size:18px; }
}
